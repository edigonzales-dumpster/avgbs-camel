<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:fn="http://java.sun.com/jsp/jstl/functions">

<h:head>
    <title>AV2GB - Lieferungen: Amtliche Vermessung an das Grundbuch</title>
    <!-- 
    <h:outputStylesheet name="css/primeflex.css" />
    -->
    <link href="https://fonts.googleapis.com/css?family=IBM+Plex+Sans+Condensed:400,700|IBM+Plex+Sans:400,700" rel="stylesheet" />   
</h:head>

<h:body>
    <f:facet name="last">
        <h:outputStylesheet name="css/app.css" />
    </f:facet>
    <div class="container">
        <div class="p-grid p-align-center container">
            <div class="p-col">
                <div class="box"></div>
            </div>
            <div class="p-col">
                <div class="box"></div>
            </div>
            <div class="p-col">
                <div class="box">
                    <h:form>
                        <p:dataTable var="message" value="#{av2gb.messageList}" reflow="true">
                            <p:column headerText="Mutationsnummer" filterBy="#{message.mutationsnummerNummer} #{message.mutationsnummerNBIdent}" filterMatchMode="contains">
                                <h:outputText value="#{message.mutationsnummerNummer} / #{message.mutationsnummerNBIdent}" />
                            </p:column>
                            <p:column headerText="Nummer" sortBy="#{message.mutationsnummerNummer}" filterBy="#{message.mutationsnummerNummer}" filterMatchMode="contains">
                                <h:outputText value="#{message.mutationsnummerNummer}" />
                            </p:column>
                            <p:column headerText="NBIdent" sortBy="#{message.mutationsnummerNBIdent}" filterBy="#{message.mutationsnummerNBIdent}" filterMatchMode="contains">
                                <h:outputText value="#{message.mutationsnummerNBIdent}" />
                            </p:column>
                            <p:column headerText="Beschreibung" sortBy="#{message.beschrieb}" filterBy="#{message.beschrieb}" filterMatchMode="contains">
                                <h:outputText value="#{message.beschrieb}" />
                            </p:column>
                            <p:column headerText="Technischer Abschluss" sortBy="#{message.endetechnbereit}" filterBy="#{message.endetechnbereit}" filterMatchMode="contains">
                                <h:outputText value="#{message.endetechnbereit}" />
                            </p:column>
                            <p:column headerText="Plan" style="text-align: center">
                                <h:outputLink value="#{message.dateinameplan}" target="_blank">PDF</h:outputLink>
                            </p:column>                            
                            <p:column headerText="Tabelle" style="text-align: center">
                                <h:outputLink value="${fn:substring(message.dateinameplan, 0, fn:length(message.dateinameplan)-4)}.xml" target="_blank">XML</h:outputLink>
                            </p:column>
                            <p:column headerText="Karte" style="text-align: center">
                                <h:outputLink value="https://geo.so.ch/map" target="_blank">Link</h:outputLink>
                            </p:column>                            
                            <p:column headerText="Ist Projektmutation?" sortBy="#{message.istprojektmutation}" filterBy="#{message.istprojektmutation}" filterMatchMode="contains">
                                <h:outputText value="#{message.istprojektmutation}" />
                            </p:column>
                            <p:column headerText="Importdatum" sortBy="#{message.importdate}" filterBy="#{message.importdate}" filterMatchMode="contains">
                                <h:outputText value="#{message.importdate}" >
                                    <f:convertDateTime pattern="yyyy-MM-dd HH:mm" />
                                </h:outputText>
                            </p:column>
                        </p:dataTable>
                    </h:form>
                </div>
            </div>
        </div>
    </div>
</h:body>
</html>